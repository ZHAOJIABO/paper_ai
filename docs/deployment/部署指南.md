# Paper AI éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. è´­ä¹°æœåŠ¡å™¨
- **æ¨è**ï¼šVultr æ—¥æœ¬æœåŠ¡å™¨
- **ç³»ç»Ÿ**ï¼šUbuntu 22.04 LTS
- **é…ç½®**ï¼š1æ ¸2GB èµ·ï¼ˆ$12/æœˆï¼‰
- **è®°ä¸‹æœåŠ¡å™¨ IP**

### 2. å‡†å¤‡ Claude API Key
- ä» Anthropic å®˜ç½‘è·å–
- æ ¼å¼ï¼š`sk-ant-xxx...`

---

## ğŸš€ å¼€å§‹éƒ¨ç½²

### ç¬¬ 1 æ­¥ï¼šè¿æ¥æœåŠ¡å™¨
```bash
ssh root@your_server_ip
```

### ç¬¬ 2 æ­¥ï¼šä¸Šä¼ é¡¹ç›®
```bash
# åœ¨æœåŠ¡å™¨æ‰§è¡Œ
cd /opt
git clone <ä½ çš„é¡¹ç›®åœ°å€> paper_ai
cd paper_ai
```

### ç¬¬ 3 æ­¥ï¼šé…ç½®æ–‡ä»¶
```bash
# 1. å¤åˆ¶ç¯å¢ƒå˜é‡
cp .env.example .env

# 2. ç”Ÿæˆæ•°æ®åº“å¯†ç 
echo "DB_PASSWORD=$(openssl rand -base64 32)" > .env

# 3. å¤åˆ¶é…ç½®æ–‡ä»¶
cp config/config.example.yaml config/config.yaml

# 4. ç¼–è¾‘é…ç½®ï¼ˆä¿®æ”¹3ä¸ªåœ°æ–¹ï¼‰
vim config/config.yaml
```

**éœ€è¦ä¿®æ”¹çš„3ä¸ªåœ°æ–¹ï¼š**
```yaml
ai:
  providers:
    claude:
      api_key: "å¡«å…¥ä½ çš„Claude API Key"  # æ”¹è¿™é‡Œ

jwt:
  secret_key: "$(openssl rand -base64 32)"  # æ”¹è¿™é‡Œï¼Œç”¨å‘½ä»¤ç”Ÿæˆéšæœºå­—ç¬¦ä¸²

database:
  password: "å¡«å…¥ .env ä¸­çš„ DB_PASSWORD"  # æ”¹è¿™é‡Œ
```

**ç”Ÿæˆ JWT Secretï¼š**
```bash
# åœ¨æœåŠ¡å™¨æ‰§è¡Œï¼Œå¤åˆ¶è¾“å‡ºç»“æœ
openssl rand -base64 32
```

### ç¬¬ 4 æ­¥ï¼šå®‰è£… Docker
```bash
# å®‰è£… Docker
curl -fsSL https://get.docker.com | sh

# å®‰è£… Docker Compose
apt install -y docker-compose

# å¼€æ”¾ç«¯å£
ufw allow 80/tcp
ufw allow 443/tcp
```

### ç¬¬ 5 æ­¥ï¼šå¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### ç¬¬ 6 æ­¥ï¼šéªŒè¯éƒ¨ç½²
```bash
# æµ‹è¯• API
curl http://localhost:8080/health

# åº”è¯¥è¿”å›ï¼š{"status":"ok"}
```

---

## ğŸ”„ æ›´æ–°æœåŠ¡

### æ–¹æ³•ä¸€ï¼šå¿«é€Ÿæ›´æ–°ï¼ˆ3è¡Œå‘½ä»¤ï¼‰
```bash
cd /opt/paper_ai
git pull
docker-compose up -d --build
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨æ›´æ–°è„šæœ¬ï¼ˆè‡ªåŠ¨å¤‡ä»½æ•°æ®åº“ï¼‰
```bash
cd /opt/paper_ai
bash scripts/update.sh
```

### æ–¹æ³•ä¸‰ï¼šå¿«é€Ÿæ›´æ–°è„šæœ¬ï¼ˆå°æ”¹åŠ¨æ— éœ€å¤‡ä»½ï¼‰
```bash
cd /opt/paper_ai
bash scripts/quick_update.sh
```

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†
```bash
# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app

# é‡å¯æœåŠ¡
docker-compose restart app

# åœæ­¢æœåŠ¡
docker-compose down

# å¯åŠ¨æœåŠ¡
docker-compose up -d
```

### æ•°æ®åº“ç®¡ç†
```bash
# å¤‡ä»½æ•°æ®åº“
bash scripts/backup.sh

# æ¢å¤æ•°æ®åº“
bash scripts/restore.sh backup/paper_ai_20250101_120000.sql.gz

# è¿›å…¥æ•°æ®åº“
docker exec -it paper_ai_db psql -U paperai -d paper_ai
```

### æŸ¥çœ‹é…ç½®
```bash
# æŸ¥çœ‹æ•°æ®åº“å¯†ç 
cat .env

# æŸ¥çœ‹é…ç½®æ–‡ä»¶
cat config/config.yaml
```

---

## âš ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs -f app

# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat config/config.yaml

# é‡å¯æœåŠ¡
docker-compose restart
```

### é—®é¢˜2ï¼šæ— æ³•è®¿é—®
```bash
# æ£€æŸ¥ç«¯å£
netstat -tlnp | grep 80

# æ£€æŸ¥é˜²ç«å¢™
ufw status

# æµ‹è¯•æœ¬åœ°è®¿é—®
curl http://localhost:8080/health
```

### é—®é¢˜3ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs postgres

# æ£€æŸ¥æ•°æ®åº“å¯†ç æ˜¯å¦ä¸€è‡´
cat .env
grep password config/config.yaml

# é‡å¯æ•°æ®åº“
docker-compose restart postgres
```

---

## ğŸŒ å›½å†…è®¿é—®è¯´æ˜

### âœ… å¯ä»¥è®¿é—®
- Vultr æ—¥æœ¬æœåŠ¡å™¨å¯ä»¥ä»å›½å†…æ­£å¸¸è®¿é—®
- å»¶è¿Ÿçº¦ 50-150ms
- æœåŠ¡å™¨å¯ä»¥è®¿é—® Claude API

### æ¨èé…ç½®ï¼ˆæé«˜ç¨³å®šæ€§ï¼‰
1. è´­ä¹°åŸŸå
2. ä½¿ç”¨ Cloudflare CDNï¼ˆå…è´¹ï¼‰
3. å¼€å¯ HTTPSï¼ˆLet's Encrypt å…è´¹è¯ä¹¦ï¼‰

---

## ğŸ“ è·å–å¸®åŠ©

- **è¯¦ç»†æ–‡æ¡£**ï¼šæŸ¥çœ‹ [DEPLOYMENT.md](./DEPLOYMENT.md)
- **å¿«é€Ÿéƒ¨ç½²**ï¼šæŸ¥çœ‹ [QUICK_DEPLOY.md](./QUICK_DEPLOY.md)
- **æŸ¥çœ‹æ—¥å¿—**ï¼š`docker-compose logs -f`

---

## âœ… éƒ¨ç½²æ¸…å•

- [ ] è´­ä¹°æœåŠ¡å™¨
- [ ] å‡†å¤‡ Claude API Key
- [ ] ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨
- [ ] é…ç½® config.yamlï¼ˆ3ä¸ªåœ°æ–¹ï¼‰
- [ ] å®‰è£… Docker
- [ ] å¯åŠ¨æœåŠ¡
- [ ] éªŒè¯ API å¯ç”¨
- [ ] è®¾ç½®å®šæœŸå¤‡ä»½ï¼ˆå¯é€‰ï¼‰
- [ ] é…ç½®åŸŸåå’Œ HTTPSï¼ˆå¯é€‰ï¼‰

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤é€ŸæŸ¥

```bash
# éƒ¨ç½²
cd /opt && git clone <é¡¹ç›®> paper_ai && cd paper_ai
cp .env.example .env && cp config/config.example.yaml config/config.yaml
vim config/config.yaml  # ä¿®æ”¹3ä¸ªåœ°æ–¹
curl -fsSL https://get.docker.com | sh && apt install -y docker-compose
docker-compose up -d

# æ›´æ–°
cd /opt/paper_ai && git pull && docker-compose up -d --build

# å¤‡ä»½
cd /opt/paper_ai && bash scripts/backup.sh

# æ—¥å¿—
docker-compose logs -f app
```

å®Œæˆï¼ğŸš€
